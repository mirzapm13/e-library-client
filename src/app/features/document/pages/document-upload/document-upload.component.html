<div class="card min-h-full">
    <p-button
        icon="pi pi-chevron-left"
        label="Back"
        (onClick)="clickBack()"
        size="small"
        [outlined]="true"
    />

    <h5>Document Upload</h5>

    <form
        class="flex flex-column gap-2 mt-5"
        [formGroup]="uploadForm"
        (ngSubmit)="onSubmit()"
    >
        <div class="field grid">
            <label class="col-2" for="file"
                >Choose File <span class="text-red-500">*</span></label
            >
            <div class="col-12 md:col-10">
                <input
                    type="file"
                    placeholder="Choose File"
                    accept="application/pdf"
                    (change)="onFilePicked($event)"
                    formControlName="file"
                    id="file"
                />
                <div
                    *ngIf="
                        uploadForm.controls['file']?.invalid &&
                        uploadForm.controls['file']?.touched
                    "
                >
                    <small
                        *ngIf="uploadForm.controls['file']?.errors?.['required']"
                        >File is required.</small
                    >
                </div>
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="name"
                >Document Number <span class="text-red-500">*</span></label
            >
            <div class="col-12 md:col-10">
                <input
                    pInputText
                    class="w-full"
                    type="text"
                    name="name"
                    id="name"
                    formControlName="document_no"
                />
                <div
                    *ngIf="
                        uploadForm.controls['document_no']?.invalid &&
                        uploadForm.controls['document_no']?.touched
                    "
                >
                    <small
                        *ngIf="uploadForm.controls['document_no']?.errors?.['required']"
                        >Document Number is required.</small
                    >
                </div>
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="name"
                >Title <span class="text-red-500">*</span></label
            >
            <div class="col-12 md:col-10">
                <input
                    pInputText
                    class="w-full"
                    type="text"
                    name="short_desc"
                    id="short_desc"
                    formControlName="title"
                />

                <div
                    *ngIf="
                        uploadForm.controls['title']?.invalid &&
                        uploadForm.controls['title']?.touched
                    "
                >
                    <small
                        *ngIf="uploadForm.controls['title']?.errors?.['required']"
                        >Title is required.</small
                    >
                </div>
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="name">Description</label>
            <div class="col-12 md:col-10">
                <textarea
                    pInputText
                    class="w-full"
                    type="text"
                    name="long_desc"
                    id="long_desc"
                    rows="5"
                    formControlName="description"
                ></textarea>
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="status"
                >Category <span class="text-red-500">*</span></label
            >
            <div class="col-12 md:col-10">
                <p-treeSelect
                    formControlName="selectedCategory"
                    [filter]="true"
                    class="block w-full"
                    [options]="categories"
                    selectionMode="single"
                    name="category"
                />
                <div
                    *ngIf="
                        uploadForm.controls['selectedCategory']?.invalid &&
                        uploadForm.controls['selectedCategory']?.touched
                    "
                >
                    <small
                        *ngIf="uploadForm.controls['selectedCategory']?.errors?.['required']"
                        >Category is required.</small
                    >
                </div>
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="status"
                >Criteria <span class="text-red-500">*</span></label
            >
            <div class="gap-5 col-12 md:col-10">
                <div class="flex gap-5 align-items-center">
                    <div class="flex align-items-center">
                        <p-radioButton
                            name="criteria"
                            value="internal"
                            formControlName="criteria"
                            inputId="kriteria1"
                        />
                        <label for="kriteria1" class="ml-2"> Internal </label>
                    </div>

                    <div class="flex align-items-center">
                        <p-radioButton
                            name="criteria"
                            value="restricted"
                            formControlName="criteria"
                            inputId="kriteria2"
                        />
                        <label for="kriteria2" class="ml-2"> Restricted </label>
                    </div>
                </div>

                <div
                    *ngIf="
                        uploadForm.controls['criteria']?.invalid &&
                        uploadForm.controls['criteria']?.touched
                    "
                >
                    <small
                        *ngIf="uploadForm.controls['criteria']?.errors?.['required']"
                        >Criteria is required.</small
                    >
                </div>
            </div>
        </div>
        <div class="field grid">
            <label class="col-2" for="status">Announce Document </label>
            <div class="flex gap-5 col-12 md:col-10">
                <p-checkbox
                    formControlName="release"
                    [binary]="true"
                    inputId="binary"
                />
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="status">Expired Date</label>
            <div class="flex gap-5 col-12 md:col-10">
                <p-calendar
                    class="CalendarInput"
                    formControlName="expiredAt"
                    [iconDisplay]="'input'"
                    [showIcon]="true"
                    inputId="icondisplay"
                    [style]="{ width: '100%' }"
                    [inputStyle]="{ width: '100%' }"
                    dateFormat="yy-mm-dd"
                />
            </div>
        </div>

        <div class="field grid">
            <label class="col-2" for="tag">Tag</label>
            <div class="flex gap-5 col-12 md:col-10">
                <p-chips
                    class="TagInput"
                    styleClass="TagInput"
                    formControlName="tags"
                    name="tag"
                    [max]="4"
                    placeholder="Maximum 4 items"
                />
            </div>
        </div>

        <!-- <div class="field grid">
            <label class="col-2" for="tag">References</label>
            <div class="gap-5 col-12 md:col-10">
                <p-autoComplete
                    class="w-full"
                    [style]="{ width: '100%' }"
                    [inputStyle]="{ width: '100%' }"
                />
                <div class="mt-2">
                    <p-table
                        [tableStyle]="{ 'min-width': '50rem' }"
                        [rows]="20"
                        [reorderableColumns]="true"
                        [value]="references"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <th>Document Number</th>
                                <th>Jenis Referensi</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-doc let-i="rowIndex">
                            <tr [pReorderableRow]="i">
                                <td>{{ doc.document_no }}</td>
                                <td>{{ doc.type }}</td>
                                <td>{{ doc.active }}</td>
                                <td>
                                    <p-button
                                        label="Delete"
                                        severity="danger"
                                        size="small"
                                    />
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </div> -->

        <div class="flex justify-content-end mt-8">
            <p-button class="" type="submit" label="Submit"></p-button>
        </div>
    </form>
</div>
